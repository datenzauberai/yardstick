<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Recall — recall • yardstick</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>
<link href="../tidyverse-2.css" rel="stylesheet">

<!--optional theme-->
<link href="../.css" rel="stylesheet">




<meta property="og:title" content="Recall — recall" />
<meta property="og:description" content="These functions calculate the recall() of a measurement system for
finding relevant documents compared to reference results
(the truth regarding relevance). Highly related functions are precision()
and f_meas()." />
<meta property="og:image" content="https://yardstick.tidymodels.org/logo.png" />
<meta name="twitter:card" content="summary" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">yardstick</a>
        <div class="info hidden-xs hidden-sm">
          <span class="partof">part of <a href="https://tidymodels.org">tidymodels</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.0.7.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/custom-metrics.html">Custom metrics</a>
    </li>
    <li>
      <a href="../articles/metric-types.html">Metric types</a>
    </li>
    <li>
      <a href="../articles/multiclass.html">Multiclass averaging</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/tidymodels/yardstick/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Recall</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidymodels/yardstick/blob/master/R/class-recall.R'><code>R/class-recall.R</code></a></small>
    <div class="hidden name"><code>recall.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These functions calculate the <code>recall()</code> of a measurement system for
finding relevant documents compared to reference results
(the truth regarding relevance). Highly related functions are <code><a href='precision.html'>precision()</a></code>
and <code><a href='f_meas.html'>f_meas()</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>recall</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for data.frame</span>
<span class='fu'>recall</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>truth</span>,
  <span class='va'>estimate</span>,
  estimator <span class='op'>=</span> <span class='cn'>NULL</span>,
  na_rm <span class='op'>=</span> <span class='cn'>TRUE</span>,
  event_level <span class='op'>=</span> <span class='fu'>yardstick_event_level</span><span class='op'>(</span><span class='op'>)</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='fu'>recall_vec</span><span class='op'>(</span>
  <span class='va'>truth</span>,
  <span class='va'>estimate</span>,
  estimator <span class='op'>=</span> <span class='cn'>NULL</span>,
  na_rm <span class='op'>=</span> <span class='cn'>TRUE</span>,
  event_level <span class='op'>=</span> <span class='fu'>yardstick_event_level</span><span class='op'>(</span><span class='op'>)</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>Either a <code>data.frame</code> containing the <code>truth</code> and <code>estimate</code>
columns, or a <code>table</code>/<code>matrix</code> where the true class results should be
in the columns of the table.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Not currently used.</p></td>
    </tr>
    <tr>
      <th>truth</th>
      <td><p>The column identifier for the true class results
(that is a <code>factor</code>). This should be an unquoted column name although
this argument is passed by expression and supports
<a href='https://rlang.r-lib.org/reference/nse-force.html'>quasiquotation</a> (you can unquote column
names). For <code>_vec()</code> functions, a <code>factor</code> vector.</p></td>
    </tr>
    <tr>
      <th>estimate</th>
      <td><p>The column identifier for the predicted class
results (that is also <code>factor</code>). As with <code>truth</code> this can be
specified different ways but the primary method is to use an
unquoted variable name. For <code>_vec()</code> functions, a <code>factor</code> vector.</p></td>
    </tr>
    <tr>
      <th>estimator</th>
      <td><p>One of: <code>"binary"</code>, <code>"macro"</code>, <code>"macro_weighted"</code>,
or <code>"micro"</code> to specify the type of averaging to be done. <code>"binary"</code> is
only relevant for the two class case. The other three are general methods
for calculating multiclass metrics. The default will automatically choose
<code>"binary"</code> or <code>"macro"</code> based on <code>estimate</code>.</p></td>
    </tr>
    <tr>
      <th>na_rm</th>
      <td><p>A <code>logical</code> value indicating whether <code>NA</code>
values should be stripped before the computation proceeds.</p></td>
    </tr>
    <tr>
      <th>event_level</th>
      <td><p>A single string. Either <code>"first"</code> or <code>"second"</code> to specify
which level of <code>truth</code> to consider as the "event". This argument is only
applicable when <code>estimator = "binary"</code>. The default uses an
internal helper that generally defaults to <code>"first"</code>, however, if the
deprecated global option <code>yardstick.event_first</code> is set, that will be
used instead with a warning.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>tibble</code> with columns <code>.metric</code>, <code>.estimator</code>,
and <code>.estimate</code> and 1 row of values.</p>
<p>For grouped data frames, the number of rows returned will be the same as
the number of groups.</p>
<p>For <code>recall_vec()</code>, a single <code>numeric</code> value (or <code>NA</code>).</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The recall (aka sensitivity) is defined as the proportion of
relevant results out of the number of samples which were
actually relevant. When there are no relevant results, recall is
not defined and a value of <code>NA</code> is returned.</p>
<p>When the denominator of the calculation is <code>0</code>, recall is undefined. This
happens when both <code># true_positive = 0</code> and <code># false_negative = 0</code> are true,
which mean that there were no true events. When computing binary
recall, a <code>NA</code> value will be returned with a warning. When computing
multiclass recall, the individual <code>NA</code> values will be removed, and the
computation will procede, with a warning.</p>
    <h2 class="hasAnchor" id="relevant-level"><a class="anchor" href="#relevant-level"></a>Relevant Level</h2>

    


<p>There is no common convention on which factor level should
automatically be considered the "event" or "positive" result
when computing binary classification metrics. In <code>yardstick</code>, the default
is to use the <em>first</em> level. To alter this, change the argument
<code>event_level</code> to <code>"second"</code> to consider the <em>last</em> level of the factor the
level of interest. For multiclass extensions involving one-vs-all
comparisons (such as macro averaging), this option is ignored and
the "one" level is always the relevant result.</p>
    <h2 class="hasAnchor" id="multiclass"><a class="anchor" href="#multiclass"></a>Multiclass</h2>

    


<p>Macro, micro, and macro-weighted averaging is available for this metric.
The default is to select macro averaging if a <code>truth</code> factor with more
than 2 levels is provided. Otherwise, a standard binary calculation is done.
See <code><a href='../articles/multiclass.html'>vignette("multiclass", "yardstick")</a></code> for more information.</p>
    <h2 class="hasAnchor" id="implementation"><a class="anchor" href="#implementation"></a>Implementation</h2>

    


<p>Suppose a 2x2 table with notation:</p>
<table class='table'>
<tr><td></td><td>Reference</td><td></td></tr>
<tr><td>Predicted</td><td>Relevant</td><td>Irrelevant</td></tr>
<tr><td>Relevant</td><td>A</td><td>B</td></tr>
<tr><td>Irrelevant</td><td>C</td><td>D</td></tr>
</table>


<p>The formulas used here are:</p>
<p>$$recall = A/(A+C)$$
$$precision = A/(A+B)$$
$$F_{meas} = (1+\beta^2) * precision * recall/((\beta^2 * precision)+recall)$$</p>
<p>See the references for discussions of the statistics.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Buckland, M., &amp; Gey, F. (1994). The relationship
between Recall and Precision. <em>Journal of the American Society
for Information Science</em>, 45(1), 12-19.</p>
<p>Powers, D. (2007). Evaluation: From Precision, Recall and F
Factor to ROC, Informedness, Markedness and Correlation.
Technical Report SIE-07-001, Flinders University</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other class metrics: 
<code><a href='accuracy.html'>accuracy</a>()</code>,
<code><a href='bal_accuracy.html'>bal_accuracy</a>()</code>,
<code><a href='detection_prevalence.html'>detection_prevalence</a>()</code>,
<code><a href='f_meas.html'>f_meas</a>()</code>,
<code><a href='j_index.html'>j_index</a>()</code>,
<code><a href='kap.html'>kap</a>()</code>,
<code><a href='mcc.html'>mcc</a>()</code>,
<code><a href='npv.html'>npv</a>()</code>,
<code><a href='ppv.html'>ppv</a>()</code>,
<code><a href='precision.html'>precision</a>()</code>,
<code><a href='sens.html'>sens</a>()</code>,
<code><a href='spec.html'>spec</a>()</code></p>
<p>Other relevance metrics: 
<code><a href='f_meas.html'>f_meas</a>()</code>,
<code><a href='precision.html'>precision</a>()</code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Max Kuhn</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Two class</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"two_class_example"</span><span class='op'>)</span>
<span class='fu'>recall</span><span class='op'>(</span><span class='va'>two_class_example</span>, <span class='va'>truth</span>, <span class='va'>predicted</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 x 3</span><span>
#&gt;   .metric .estimator .estimate
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>          </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> recall  binary         0.880</div><div class='input'>
<span class='co'># Multiclass</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>hpc_cv</span><span class='op'>)</span>

<span class='va'>hpc_cv</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Resample</span> <span class='op'>==</span> <span class='st'>"Fold01"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>recall</span><span class='op'>(</span><span class='va'>obs</span>, <span class='va'>pred</span><span class='op'>)</span>
</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 1 x 3</span><span>
#&gt;   .metric .estimator .estimate
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>          </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> recall  macro          0.548</div><div class='input'>
<span class='co'># Groups are respected</span>
<span class='va'>hpc_cv</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>Resample</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>recall</span><span class='op'>(</span><span class='va'>obs</span>, <span class='va'>pred</span><span class='op'>)</span>
</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 10 x 4</span><span>
#&gt;    Resample .metric .estimator .estimate
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>          </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> Fold01   recall  macro          0.548
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> Fold02   recall  macro          0.541
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> Fold03   recall  macro          0.634
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> Fold04   recall  macro          0.570
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> Fold05   recall  macro          0.550
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> Fold06   recall  macro          0.540
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> Fold07   recall  macro          0.531
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> Fold08   recall  macro          0.584
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> Fold09   recall  macro          0.568
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> Fold10   recall  macro          0.537</div><div class='input'>
<span class='co'># Weighted macro averaging</span>
<span class='va'>hpc_cv</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>Resample</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>recall</span><span class='op'>(</span><span class='va'>obs</span>, <span class='va'>pred</span>, estimator <span class='op'>=</span> <span class='st'>"macro_weighted"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 10 x 4</span><span>
#&gt;    Resample .metric .estimator     .estimate
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>              </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> Fold01   recall  macro_weighted     0.726
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> Fold02   recall  macro_weighted     0.712
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> Fold03   recall  macro_weighted     0.758
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> Fold04   recall  macro_weighted     0.712
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> Fold05   recall  macro_weighted     0.712
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> Fold06   recall  macro_weighted     0.697
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> Fold07   recall  macro_weighted     0.675
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> Fold08   recall  macro_weighted     0.721
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> Fold09   recall  macro_weighted     0.673
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> Fold10   recall  macro_weighted     0.699</div><div class='input'>
<span class='co'># Vector version</span>
<span class='fu'>recall_vec</span><span class='op'>(</span>
  <span class='va'>two_class_example</span><span class='op'>$</span><span class='va'>truth</span>,
  <span class='va'>two_class_example</span><span class='op'>$</span><span class='va'>predicted</span>
<span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 0.879845</div><div class='input'>
<span class='co'># Making Class2 the "relevant" level</span>
<span class='fu'>recall_vec</span><span class='op'>(</span>
  <span class='va'>two_class_example</span><span class='op'>$</span><span class='va'>truth</span>,
  <span class='va'>two_class_example</span><span class='op'>$</span><span class='va'>predicted</span>,
  event_level <span class='op'>=</span> <span class='st'>"second"</span>
<span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 0.7933884</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="tidyverse">
  <p>yardstick is a part of the <strong>tidymodels</strong> ecosystem, a collection of modeling packages designed with common APIs and a shared philosophy.</p>
</div>

<div class="author">
  <p>
    Developed by Max Kuhn, Davis Vaughan.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
   </div>

  


  </body>
</html>


